---
import { getEntry, render } from "astro:content";
import Page from "@layouts/Page.astro";

const { id } = Astro.params;
if (id == undefined) return Astro.redirect("/404");
const post = await getEntry("blog", id);
if (post == undefined) return Astro.redirect("/404");

const { Content } = await render(post);
const path = "~/blog/" + post.slug.toLowerCase().replaceAll(" ", "-") + ".md";
---
<Page title={post.data.title} path={path}>
    <Fragment slot="metadata">
        <meta property="og:site_name" content="mudkip" />
        <meta property="og:description" content={post.data.description} />
    </Fragment>

    <Content />
</Page>

{/* why is global needed? */}
<style is:global>
    #content h1, #content h2 {
        margin: 8px 0;
    }

    #content h2:nth-of-type(5n + 1) {
        color: var(--ctp-macchiato-red);
    }

    #content h2:nth-of-type(5n + 2) {
        color: var(--ctp-macchiato-peach);
    }

    #content h2:nth-of-type(5n + 3) {
        color: var(--ctp-macchiato-yellow);
    }

    #content h2:nth-of-type(5n + 4) {
        color: var(--ctp-macchiato-green);
    }

    #content h2:nth-of-type(5n + 5) {
        color: var(--ctp-macchiato-blue);
    }

    #content h2:nth-of-type(5n + 6) {
        color: var(--ctp-macchiato-mauve);
    }

    #content p:has(img) {
        text-align: center;
    }

    #content img {
        max-height: 350px;
        max-width: 100%;
        margin-top: 1em;
        width: auto;
        height: auto;
    }
</style>